<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>iPhone Outgoing Call</title>
  <style>
    /* Import Google Fonts for Icons (Material Symbols) */
    @import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200');

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #000;
      color: white;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    /* Dialpad screen styles */
    .dial-screen {
      max-width: 400px;
      width: 100%;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 1;
      transition: opacity 0.5s ease-in-out;
    }

    .number-display {
      font-size: 32px;
      margin-top: 10vh;
      margin-bottom: 50px;
      letter-spacing: 1px;
      font-weight: 300;
      opacity: 0.9;
    }

    .dialpad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      width: 100%;
      max-width: 320px;
      margin-bottom: 60px;
    }

    .btn {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      width: 80px;
      height: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 32px;
      color: white;
      border: none;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: background-color 0.1s ease-in-out;
    }

    .btn:active {
      background-color: rgba(255, 255, 255, 0.2);
    }
    
    .btn-delete {
      background-color: transparent;
      font-size: 24px;
      color: #34c759;
      height: auto;
      width: auto;
    }

    .call-btn-container {
      width: 100%;
      max-width: 320px;
      display: flex;
      justify-content: center;
    }

    .call-btn {
      background-color: #34c759;
      color: white;
      font-size: 18px;
      padding: 12px 25px;
      border-radius: 30px;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease-in-out;
    }

    .call-btn:active {
      background-color: #2da44a;
    }

    /* Call screen styles */
    .call-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      background-size: cover;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    .call-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 15vh;
    }

    .contact-name {
      font-size: 36px;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .call-status {
      font-size: 16px;
      margin-top: 5px;
      opacity: 0.7;
    }
    
    .call-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 40px 20px;
      width: 100%;
      max-width: 300px;
      margin-top: auto;
      padding: 0 20px;
    }

    .action-btn {
      background-color: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 50%;
      width: 70px;
      height: 70px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      transition: background-color 0.2s ease-in-out;
    }

    .action-btn:active {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .action-icon {
      font-size: 24px;
      margin-bottom: 4px;
      font-family: 'Material Symbols Outlined';
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    .icon-mute::before { content: 'mic_off'; }
    .icon-keypad::before { content: 'dialpad'; }
    .icon-speaker::before { content: 'volume_up'; }
    .icon-add::before { content: 'person_add'; }
    .icon-facetime::before { content: 'videocam'; }
    .icon-contacts::before { content: 'person'; }
    .icon-park::before { content: 'phone_paused'; }

    .action-label {
      font-size: 12px;
      font-weight: 500;
    }

    .end-call-btn-container {
      width: 100%;
      max-width: 300px;
      margin-top: 40px;
    }

    .end-call-btn {
      background-color: #ff3b30;
      color: white;
      font-size: 18px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s ease-in-out;
    }

    .end-call-btn:active {
      background-color: #d12e25;
    }

    .end-call-icon::before {
      content: 'call_end';
      font-size: 32px;
      font-family: 'Material Symbols Outlined';
      font-variation-settings: 'wght' 400;
      transform: rotate(135deg);
      display: inline-block;
    }
  </style>
</head>
<body>
  <div class="dial-screen" id="dialScreen">
    <div class="number-display" id="display">Enter a number</div>
    <div class="dialpad">
      <button class="btn" onclick="press('1')">1</button>
      <button class="btn" onclick="press('2')">2</button>
      <button class="btn" onclick="press('3')">3</button>
      <button class="btn" onclick="press('4')">4</button>
      <button class="btn" onclick="press('5')">5</button>
      <button class="btn" onclick="press('6')">6</button>
      <button class="btn" onclick="press('7')">7</button>
      <button class="btn" onclick="press('8')">8</button>
      <button class="btn" onclick="press('9')">9</button>
      <button class="btn" onclick="press('+')">+</button>
      <button class="btn" onclick="press('0')">0</button>
      <button class="btn" onclick="deleteLast()">
        <span class="material-symbols-outlined" style="color: white;">backspace</span>
      </button>
    </div>
    <div class="call-btn-container">
      <button class="call-btn" onclick="startRinging()">Call</button>
    </div>
  </div>

  <div class="call-screen" id="callScreen">
    <div class="call-info">
      <div class="contact-name" id="contactDisplay">Unknown</div>
      <div class="call-status" id="status">Ringing...</div>
    </div>
    
    <div class="call-buttons">
      <button class="action-btn">
        <span class="action-icon icon-mute"></span>
        <span class="action-label">Mute</span>
      </button>
      <button class="action-btn">
        <span class="action-icon icon-keypad"></span>
        <span class="action-label">Keypad</span>
      </button>
      <button class="action-btn">
        <span class="action-icon icon-speaker"></span>
        <span class="action-label">Speaker</span>
      </button>
      <button class="action-btn">
        <span class="action-icon icon-contacts"></span>
        <span class="action-label">Contacts</span>
      </button>
      <button class="action-btn">
        <span class="action-icon icon-facetime"></span>
        <span class="action-label">FaceTime</span>
      </button>
      <button class="action-btn">
        <span class="action-icon icon-add"></span>
        <span class="action-label">Add Call</span>
      </button>
    </div>
    <div class="end-call-btn-container">
      <button class="end-call-btn" onclick="endCall()">
        <span class="end-call-icon"></span>
      </button>
    </div>
  </div>

  <audio id="ringtone" src="./Phone-Internal-Ringing.mp3" preload="auto"></audio>
  <audio id="voiceMessage" src="./2025-09-18-052559_158290.mp3" preload="auto"></audio>

  <script>
    let number = '';
    const dialScreen = document.getElementById('dialScreen');
    const callScreen = document.getElementById('callScreen');
    const ringtone = document.getElementById('ringtone');
    const voiceMessage = document.getElementById('voiceMessage');
    let ringtoneTimeout;
    let voiceMessageCounter = 0;

    function press(digit) {
      number += digit;
      document.getElementById('display').innerText = number;
    }
    
    function deleteLast() {
      number = number.slice(0, -1);
      if (number.length === 0) {
        document.getElementById('display').innerText = 'Enter a number';
      } else {
        document.getElementById('display').innerText = number;
      }
    }

    function playVoiceMessage() {
      if (voiceMessageCounter < 3) {
        voiceMessage.play();
        voiceMessage.onended = () => {
          voiceMessageCounter++;
          playVoiceMessage();
        };
      } else {
        endCall();
      }
    }

    function startRinging() {
      if (number.length === 0 || number === 'Enter a number') {
        alert("Please enter a number to call.");
        return;
      }

      dialScreen.style.opacity = '0';
      setTimeout(() => {
        dialScreen.style.display = 'none';
        callScreen.style.display = 'flex';
        setTimeout(() => {
          callScreen.style.opacity = '1';
        }, 10);
      }, 500);

      document.getElementById('contactDisplay').innerText = number;
      
      ringtone.play();
      ringtone.loop = true;

      // After 1 minute (60000ms), play the voice message
      ringtoneTimeout = setTimeout(() => {
        ringtone.pause();
        ringtone.currentTime = 0;
        document.getElementById('status').innerText = 'The person is unavailable';
        playVoiceMessage();
      }, 60000);
    }

    function endCall() {
      clearTimeout(ringtoneTimeout);
      ringtone.pause();
      ringtone.currentTime = 0;
      voiceMessage.pause();
      voiceMessage.currentTime = 0;
      voiceMessageCounter = 0;

      callScreen.style.opacity = '0';
      setTimeout(() => {
        callScreen.style.display = 'none';
        dialScreen.style.display = 'flex';
        setTimeout(() => {
          dialScreen.style.opacity = '1';
        }, 10);
      }, 500);

      number = '';
      document.getElementById('display').innerText = 'Enter a number';
    }
  </script>
</body>

</html>
